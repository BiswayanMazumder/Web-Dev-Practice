"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[490],{4921:function(e,t,o){o.r(t),o.d(t,{ImpersonationFab:function(){return f}});var n=o(2903),i=o(6131),r=o(2784),s=o(4016),a=o(3918),c=o(3476),l=o(353),d=o(7790),p=o(9820);const u=({width:e,height:t,...o})=>{const{sx:i,...r}=o;return(0,n.tZ)(c.Col,{elementDescriptor:c.descriptors.impersonationFabIconContainer,center:!0,sx:[o=>({width:e,height:t,backgroundColor:o.colors.$danger500,borderRadius:o.radii.$circle}),i],...r,children:(0,n.tZ)(c.Icon,{elementDescriptor:c.descriptors.impersonationFabIcon,icon:d.bA,sx:e=>({color:e.colors.$white}),size:"lg"})})},h=({title:e,signOutText:t})=>{const{session:o}=(0,i.kP)(),{signOut:r}=(0,i.cL)();return(0,n.BX)(c.Col,{sx:e=>({width:"100%",paddingLeft:e.sizes.$4,paddingRight:e.sizes.$6,whiteSpace:"nowrap"}),children:[(0,n.tZ)(c.Text,{colorScheme:"secondary",elementDescriptor:c.descriptors.impersonationFabTitle,variant:"buttonLarge",truncate:!0,localizationKey:e}),(0,n.tZ)(c.Link,{variant:"buttonLarge",elementDescriptor:c.descriptors.impersonationFabActionLink,sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,":hover":{cursor:"pointer"}}),localizationKey:t,onClick:async()=>{await r({sessionId:o.id})}})]})},m=()=>{const{session:e}=(0,i.kP)(),{t:t}=(0,c.useLocalizations)(),{parsedInternalTheme:o}=(0,c.useAppearance)(),a=(0,r.useRef)(null),d=!!(null==e?void 0:e.actor),m=o.sizes.$16,f=m,w="--cl-impersonation-fab-top",x="--cl-impersonation-fab-right",$=()=>{const e=a.current;if(!e)return;const t=window.innerWidth-e.offsetLeft-e.offsetWidth,o=window.innerHeight-e.offsetTop-e.offsetHeight;[e.offsetLeft,t,e.offsetTop,o].some((e=>e<0))&&(document.documentElement.style.setProperty(x,"23px"),document.documentElement.style.setProperty(w,"109px"))},g=r.useCallback((e=>{e.stopPropagation(),e.preventDefault();const t=a.current;if(!t)return;const o=window.innerWidth-t.offsetLeft-t.offsetWidth-e.movementX+"px";document.documentElement.style.setProperty(x,o),document.documentElement.style.setProperty(w,t.offsetTop- -e.movementY+"px")}),[]);if((0,r.useEffect)((()=>(window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$)})),[]),!d||!e.user)return null;const b=(0,c.localizationKeys)("impersonationFab.title",{identifier:(0,s.Pp)(e.user)||(0,s.xC)(e.user)}),v=t(b).length;return(0,n.tZ)(l.h,{children:(0,n.BX)(c.Flex,{ref:a,elementDescriptor:c.descriptors.impersonationFab,onPointerDown:()=>{window.addEventListener("pointermove",g),window.addEventListener("pointerup",(()=>{window.removeEventListener("pointermove",g),$()}),{once:!0})},align:"center",sx:e=>({touchAction:"none",position:"fixed",overflow:"hidden",top:`var(${w}, 109px)`,right:`var(${x}, 23px)`,zIndex:e.zIndices.$fab,boxShadow:e.shadows.$fabShadow,borderRadius:e.radii.$halfHeight,backgroundColor:e.colors.$white,fontFamily:e.fonts.$main,":hover":{cursor:"grab"},":hover #cl-impersonationText":{transition:`max-width ${e.transitionDuration.$slowest} ease, opacity ${e.transitionDuration.$slower} ease ${e.transitionDuration.$slowest}`,maxWidth:`min(calc(50vw - ${m} - 2 * 23px), ${v}ch)`,[p.mqu.md]:{maxWidth:`min(calc(100vw - ${m} - 2 * 23px), ${v}ch)`},opacity:1},":hover #cl-impersonationEye":{transform:"rotate(-180deg)"}}),children:[(0,n.tZ)(u,{id:"cl-impersonationEye",width:m,height:f,sx:e=>({transition:`transform ${e.transitionDuration.$slowest} ease`})}),(0,n.tZ)(c.Flex,{id:"cl-impersonationText",sx:e=>({transition:`max-width ${e.transitionDuration.$slowest} ease, opacity ${e.transitionDuration.$fast} ease`,maxWidth:"0px",opacity:0}),children:(0,n.tZ)(h,{title:b,signOutText:(0,c.localizationKeys)("impersonationFab.action__signOut")})})]})})},f=(0,a.withCoreUserGuard)((()=>(0,n.tZ)(p.InternalThemeProvider,{children:(0,n.tZ)(m,{})})))}}]);