"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[132],{2666:function(e,o,t){t.d(o,{fB:function(){return c},gW:function(){return u},uj:function(){return l}});var n=t(2903),r=t(3476),s=t(8512),i=t(7790);const c=e=>{const{handleManageAccountClicked:o,handleSignOutSessionClicked:t,session:c}=e;return(0,n.BX)(s.Actions,{role:"menu",elementDescriptor:r.descriptors.userButtonPopoverActions,elementId:r.descriptors.userButtonPopoverActions.setId("singleSession"),sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),children:[(0,n.tZ)(s.Action,{elementDescriptor:r.descriptors.userButtonPopoverActionButton,elementId:r.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:r.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:r.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:r.descriptors.userButtonPopoverActionButtonIcon,iconElementId:r.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),icon:i.tc,label:(0,r.localizationKeys)("userButton.action__manageAccount"),onClick:o,sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100,padding:`${e.space.$4} ${e.space.$5}`})}),(0,n.tZ)(s.Action,{elementDescriptor:r.descriptors.userButtonPopoverActionButton,elementId:r.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:r.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:r.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:r.descriptors.userButtonPopoverActionButtonIcon,iconElementId:r.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),icon:i.lv,label:(0,r.localizationKeys)("userButton.action__signOut"),onClick:t(c),sx:[e=>({borderBottomLeftRadius:e.radii.$lg,borderBottomRightRadius:e.radii.$lg,padding:`${e.space.$4} ${e.space.$5}`})]})]})},l=e=>{const{handleManageAccountClicked:o,handleSignOutSessionClicked:t,handleSessionClicked:c,handleAddAccountClicked:l,session:u,otherSessions:d}=e;return(0,n.BX)(n.HY,{children:[(0,n.tZ)(s.SmallActions,{role:"menu",elementDescriptor:r.descriptors.userButtonPopoverActions,elementId:r.descriptors.userButtonPopoverActions.setId("multiSession"),children:(0,n.BX)(r.Flex,{justify:"between",sx:e=>({marginLeft:e.space.$12,padding:`0 ${e.space.$5} ${e.space.$4}`,gap:e.space.$2}),children:[(0,n.tZ)(s.SmallAction,{elementDescriptor:r.descriptors.userButtonPopoverActionButton,elementId:r.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:r.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:r.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:r.descriptors.userButtonPopoverActionButtonIcon,iconElementId:r.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),icon:i.tc,label:(0,r.localizationKeys)("userButton.action__manageAccount"),onClick:o}),(0,n.tZ)(s.SmallAction,{elementDescriptor:r.descriptors.userButtonPopoverActionButton,elementId:r.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:r.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:r.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:r.descriptors.userButtonPopoverActionButtonIcon,iconElementId:r.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),icon:i.lv,label:(0,r.localizationKeys)("userButton.action__signOut"),onClick:t(u)})]})}),(0,n.BX)(s.Actions,{role:"menu",sx:e=>({borderTopStyle:e.borderStyles.$solid,borderTopWidth:e.borderWidths.$normal,borderTopColor:e.colors.$neutralAlpha100}),children:[d.map((e=>(0,n.tZ)(s.PreviewButton,{icon:i.nR,onClick:c(e),role:"menuitem",children:(0,n.tZ)(s.UserPreview,{user:e.user})},e.id))),(0,n.tZ)(s.Action,{elementDescriptor:r.descriptors.userButtonPopoverActionButton,elementId:r.descriptors.userButtonPopoverActionButton.setId("addAccount"),iconBoxElementDescriptor:r.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:r.descriptors.userButtonPopoverActionButtonIconBox.setId("addAccount"),iconElementDescriptor:r.descriptors.userButtonPopoverActionButtonIcon,iconElementId:r.descriptors.userButtonPopoverActionButtonIcon.setId("addAccount"),icon:i.mm,label:(0,r.localizationKeys)("userButton.action__addAccount"),onClick:l,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})]})},u=e=>{const{handleSignOutAllClicked:o,elementDescriptor:t,elementId:c,iconBoxElementDescriptor:l,iconBoxElementId:u,iconElementDescriptor:d,iconElementId:a,label:p,sx:B,actionSx:m}=e;return(0,n.tZ)(s.Actions,{role:"menu",sx:[e=>({padding:e.space.$2}),B],children:(0,n.tZ)(s.Action,{elementDescriptor:t||r.descriptors.userButtonPopoverActionButton,elementId:c||r.descriptors.userButtonPopoverActionButton.setId("signOutAll"),iconBoxElementDescriptor:l||r.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:u||r.descriptors.userButtonPopoverActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:d||r.descriptors.userButtonPopoverActionButtonIcon,iconElementId:a||r.descriptors.userButtonPopoverActionButtonIcon.setId("signOutAll"),icon:i.lv,label:p||(0,r.localizationKeys)("userButton.action__signOutAll"),onClick:o,variant:"ghost",colorScheme:"neutral",sx:[e=>({backgroundColor:e.colors.$transparent,padding:`${e.space.$2} ${e.space.$3}`,borderBottomWidth:0,borderRadius:e.radii.$lg}),m],spinnerSize:"md"})})}},3898:function(e,o,t){t.r(o),t.d(o,{UserButton:function(){return g}});var n=t(2903),r=t(2784),s=t(3918),i=t(3476),c=t(8512),l=t(1661),u=t(6131),d=t(2666),a=t(9912);const p=r.forwardRef(((e,o)=>{const{close:t,...r}=e,{session:l}=(0,u.kP)(),{authConfig:p}=(0,s.useEnvironment)(),{user:B}=(0,u.aF)(),{handleAddAccountClicked:m,handleManageAccountClicked:A,handleSessionClicked:v,handleSignOutAllClicked:g,handleSignOutSessionClicked:h,otherSessions:I}=(0,a.Z)({...(0,s.useUserButtonContext)(),actionCompleteCallback:t,user:B});return(0,n.tZ)(c.RootBox,{elementDescriptor:i.descriptors.userButtonPopoverRootBox,children:(0,n.BX)(c.PopoverCard.Root,{elementDescriptor:i.descriptors.userButtonPopoverCard,ref:o,role:"dialog","aria-label":"User button popover",...r,children:[(0,n.BX)(c.PopoverCard.Content,{elementDescriptor:i.descriptors.userButtonPopoverMain,children:[(0,n.tZ)(c.UserPreview,{elementId:"userButton",user:B,sx:e=>({width:"100%",padding:`${e.space.$4} ${e.space.$5}`})}),p.singleSessionMode?(0,n.tZ)(d.fB,{handleManageAccountClicked:A,handleSignOutSessionClicked:h,session:l}):(0,n.tZ)(d.uj,{session:l,otherSessions:I,handleManageAccountClicked:A,handleSignOutSessionClicked:h,handleSessionClicked:v,handleAddAccountClicked:m})]}),(0,n.tZ)(c.PopoverCard.Footer,{elementDescriptor:i.descriptors.userButtonPopoverFooter,children:!p.singleSessionMode&&(0,n.tZ)(d.gW,{handleSignOutAllClicked:g})})]})})}));var B=t(4016);const m=({showName:e})=>{const{user:o}=(0,u.aF)();return o&&e?(0,n.tZ)(i.Text,{variant:"subtitle",as:"span",elementDescriptor:i.descriptors.userButtonOuterIdentifier,sx:[e=>({paddingLeft:e.space.$2})],children:(0,B.Pp)(o)||(0,B.xC)(o)}):null},A=(0,c.withAvatarShimmer)((0,r.forwardRef)(((e,o)=>{const{sx:t,...r}=e,{user:l}=(0,u.aF)(),{showName:d}=(0,s.useUserButtonContext)();return(0,n.tZ)(i.Button,{elementDescriptor:i.descriptors.userButtonTrigger,variant:"roundWrapper",sx:[e=>({borderRadius:d?e.radii.$md:e.radii.$circle,color:e.colors.$colorText}),t],ref:o,"aria-label":(e.isOpen?"Close":"Open")+" user button","aria-expanded":e.isOpen,"aria-haspopup":"dialog",...r,children:(0,n.BX)(i.Flex,{elementDescriptor:i.descriptors.userButtonBox,isOpen:e.isOpen,align:"center",as:"span",gap:2,children:[(0,n.tZ)(m,{showName:d}),(0,n.tZ)(c.UserAvatar,{boxElementDescriptor:i.descriptors.userButtonAvatarBox,imageElementDescriptor:i.descriptors.userButtonAvatarImage,...l,size:e=>e.sizes.$7})]})})}))),v=(0,c.withFloatingTree)((()=>{const{defaultOpen:e}=(0,s.useUserButtonContext)(),{floating:o,reference:t,styles:u,toggle:d,isOpen:a,nodeId:B,context:m}=(0,l.Sv)({defaultOpen:e,placement:"bottom-end",offset:8}),v=(0,r.useId)();return(0,n.BX)(i.Flow.Root,{flow:"userButton",sx:{display:"inline-flex"},children:[(0,n.tZ)(A,{ref:t,onClick:d,isOpen:a,"aria-controls":a?v:void 0,"aria-expanded":a}),(0,n.tZ)(c.Popover,{nodeId:B,context:m,isOpen:a,children:(0,n.tZ)(p,{id:v,close:d,ref:o,style:{...u}})})]})})),g=(0,s.withCoreUserGuard)((0,c.withCardStateProvider)(v))},9912:function(e,o,t){t.d(o,{Z:function(){return l}});var n=t(6131),r=t(196),s=t(8512),i=t(3736),c=t(2400);const l=e=>{const{setActive:o,signOut:t,openUserProfile:l}=(0,n.cL)(),u=(0,s.useCardState)(),{sessions:d}=(0,n.xo)(),{navigate:a}=(0,i.useRouter)(),p=null==d?void 0:d.filter((e=>"active"===e.status)),B=p.filter((o=>{var t,n;return(null===(t=o.user)||void 0===t?void 0:t.id)!==(null===(n=e.user)||void 0===n?void 0:n.id)}));return{handleSignOutSessionClicked:o=>()=>0===B.length?t(e.navigateAfterSignOut):t(e.navigateAfterMultiSessionSingleSignOut,{sessionId:o.id}).finally((()=>u.setIdle())),handleManageAccountClicked:()=>{var o;return"navigation"===e.userProfileMode?a(e.userProfileUrl||"").finally((()=>{(async()=>{var o;await(0,c._v)(300),null===(o=e.actionCompleteCallback)||void 0===o||o.call(e)})()})):(l(e.userProfileProps),null===(o=e.actionCompleteCallback)||void 0===o?void 0:o.call(e))},handleSignOutAllClicked:()=>t(e.navigateAfterSignOut),handleSessionClicked:t=>async()=>(u.setLoading(),o({session:t,beforeEmit:e.navigateAfterSwitchSession}).finally((()=>{var o;u.setIdle(),null===(o=e.actionCompleteCallback)||void 0===o||o.call(e)}))),handleAddAccountClicked:()=>((0,r.T)(e.signInUrl||window.location.href),(0,c._v)(2e3)),otherSessions:B,activeSessions:p}}}}]);