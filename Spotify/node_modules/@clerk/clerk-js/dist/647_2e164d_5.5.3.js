"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[647],{3647:function(e,t,o){o.d(t,{$:function(){return v}});var i=o(2903),n=o(6131),r=o(2784),a=o(1940),l=o(3476),s=o(8512),c=o(7790),d=o(9120),u=o(2400),g=o(4095),p=o(5362),m=o(6884),h=o(1659);const v=(0,s.withCardStateProvider)((e=>{var t,o;const v=(0,s.useCardState)(),f=(0,a.a2)({onNextStep:()=>v.setError(void 0)}),b=r.useRef(null),{createOrganization:x,isLoaded:z,setActive:S,userMemberships:Z}=(0,n.eW)({userMemberships:h.AO.userMemberships}),{organization:C}=(0,n.o8)(),[_,y]=r.useState(),P=(0,u.Yp)("name","",{type:"text",label:(0,d.u1)("formFieldLabel__organizationName"),placeholder:(0,d.u1)("formFieldInputPlaceholder__organizationName")}),$=(0,u.Yp)("slug","",{type:"text",label:(0,d.u1)("formFieldLabel__organizationSlug"),placeholder:(0,d.u1)("formFieldInputPlaceholder__organizationSlug")}),T=!!P.value,w=()=>{var t;e.navigateAfterCreateOrganization(b.current),null===(t=e.onComplete)||void 0===t||t.call(e)},F=e=>{$.setValue(e)},B="organizationList"===e.flow?"subtitle":void 0;return(0,i.BX)(a.en,{...f.props,children:[(0,i.tZ)(s.FormContainer,{headerTitle:null===(t=null==e?void 0:e.startPage)||void 0===t?void 0:t.headerTitle,headerSubtitle:null===(o=null==e?void 0:e.startPage)||void 0===o?void 0:o.headerSubtitle,headerTitleTextVariant:"h2",headerSubtitleTextVariant:B,sx:e=>({minHeight:e.sizes.$60,gap:e.space.$6,textAlign:"left"}),children:(0,i.BX)(s.Form.Root,{onSubmit:async t=>{var o,i;if(t.preventDefault(),T&&z)try{const t=await x({name:P.value,slug:$.value});if(_&&await t.setLogo({file:_}),b.current=t,await S({organization:t}),null===(o=Z.revalidate)||void 0===o||o.call(Z),null!==(i=e.skipInvitationScreen)&&void 0!==i?i:1===t.maxAllowedMemberships)return w();f.nextStep()}catch(n){(0,u.S3)(n,[P,$],v.setError)}},sx:e=>({gap:e.space.$6}),children:[(0,i.tZ)(l.Col,{children:(0,i.tZ)(m.D,{organization:{name:P.value},onAvatarChange:async e=>await y(e),onAvatarRemove:_?()=>(v.setIdle(),y(null)):null,avatarPreviewPlaceholder:(0,i.tZ)(s.IconButton,{variant:"ghost","aria-label":"Upload organization logo",icon:(0,i.tZ)(l.Icon,{size:"md",icon:c.gq,sx:e=>({color:e.colors.$colorTextSecondary,transitionDuration:e.transitionDuration.$controls})}),sx:e=>({width:e.sizes.$16,height:e.sizes.$16,borderRadius:e.radii.$md,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$dashed,borderColor:e.colors.$neutralAlpha200,backgroundColor:e.colors.$neutralAlpha50,":hover":{backgroundColor:e.colors.$neutralAlpha50,svg:{transform:"scale(1.2)"}}})})})}),(0,i.tZ)(s.Form.ControlRow,{elementId:P.id,children:(0,i.tZ)(s.Form.PlainInput,{...P.props,onChange:e=>{P.setValue(e.target.value),F((0,u.qi)(e.target.value))},isRequired:!0,autoFocus:!0,ignorePasswordManager:!0})}),(0,i.tZ)(s.Form.ControlRow,{elementId:$.id,children:(0,i.tZ)(s.Form.PlainInput,{...$.props,onChange:e=>{F(e.target.value)},isRequired:!0,pattern:"^[a-z0-9\\-]+$",ignorePasswordManager:!0})}),(0,i.BX)(s.FormButtonContainer,{sx:e=>({marginTop:e.space.$none}),children:[(0,i.tZ)(s.Form.SubmitButton,{block:!1,isDisabled:!T,localizationKey:(0,d.u1)("createOrganization.formButtonSubmit")}),e.onCancel&&(0,i.tZ)(s.Form.ResetButton,{localizationKey:(0,d.u1)("userProfile.formButtonReset"),block:!1,onClick:e.onCancel})]})]})}),(0,i.tZ)(s.FormContainer,{headerTitle:(0,d.u1)("organizationProfile.invitePage.title"),headerTitleTextVariant:"h2",headerSubtitleTextVariant:B,sx:e=>({minHeight:e.sizes.$60,textAlign:"left"}),children:C&&(0,i.tZ)(g.l,{resetButtonLabel:(0,d.u1)("createOrganization.invitePage.formButtonReset"),onSuccess:f.nextStep,onReset:w})}),(0,i.BX)(l.Col,{children:[(0,i.tZ)(s.Header.Root,{children:(0,i.tZ)(s.Header.Title,{localizationKey:(0,d.u1)("organizationProfile.invitePage.title"),sx:{textAlign:"left"}})}),(0,i.tZ)(s.SuccessPage,{contents:(0,i.tZ)(p.a,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:w})]})]})}))},4095:function(e,t,o){o.d(t,{l:function(){return h}});var i=o(2903),n=o(221),r=o(6131),a=o(2784),l=o(3476),s=o(8512),c=o(5802),d=o(9120),u=o(9820),g=o(2400),p=o(9654);const m=e=>/^\S+@\S+\.\S+$/.test(e),h=e=>{const{onSuccess:t,onReset:o,resetButtonLabel:c}=e,{organization:p,invitations:h}=(0,r.o8)({invitations:{pageSize:10,keepPreviousData:!0}}),f=(0,s.useCardState)(),{t:b,locale:x,translateError:z}=(0,d.zJ)(),[S,Z]=(0,a.useState)(!1),C=(0,g.Yp)("emailAddress","",{type:"text",label:(0,d.u1)("formFieldLabel__emailAddresses")}),_=(0,g.Yp)("role","",{label:(0,d.u1)("formFieldLabel__role")});if(!p)return null;const{props:{setError:y,setWarning:P,setSuccess:$,setInfo:T,isFocused:w,validatePassword:F,setHasPassedComplexity:B,hasPassedComplexity:k,feedback:R,feedbackType:A,clearFeedback:D,...I}}=C,L=(!!C.value.length||S)&&!!_.value;return(0,i.BX)(s.Form.Root,{onSubmit:e=>{if(e.preventDefault(),!L)return;const o=new FormData(e.currentTarget);return p.inviteMembers({emailAddresses:C.value.split(","),role:o.get("role")}).then((async()=>{var e;return await(null===(e=null==h?void 0:h.revalidate)||void 0===e?void 0:e.call(h)),null==t?void 0:t()})).catch((e=>{var t,o,i,r,a;if((0,n.kD)(e)&&(e=>{var t,o,i,n;const r=new Set([...null!==(o=null===(t=e.meta)||void 0===t?void 0:t.emailAddresses)&&void 0!==o?o:[],...null!==(n=null===(i=e.meta)||void 0===i?void 0:i.identifiers)&&void 0!==n?n:[]]),a=C.value.split(",");C.setValue(a.filter((e=>!r.has(e))).join(","))})(e.errors[0]),(0,n.kD)(e)&&"duplicate_record"===(null===(o=null===(t=e.errors)||void 0===t?void 0:t[0])||void 0===o?void 0:o.code)){const t=(null===(i=e.errors[0].meta)||void 0===i?void 0:i.emailAddresses)||[];f.setError(b((0,d.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,g.z$)(t,x)})))}else(0,n.kD)(e)&&"form_param_format_invalid"===(null===(a=null===(r=e.errors)||void 0===r?void 0:r[0])||void 0===a?void 0:a.code)?f.setError(z(e.errors[0])):(0,g.S3)(e,[],f.setError)}))},children:[(0,i.tZ)(s.Form.ControlRow,{elementId:C.id,children:(0,i.tZ)(s.TagInput,{...I,autoFocus:!0,validate:m,sx:{width:"100%"},validateUnsubmittedEmail:e=>Z(m(e)),placeholder:(0,d.u1)("formFieldInputPlaceholder__emailAddresses")})}),(0,i.BX)(l.Flex,{align:"center",justify:"between",sx:e=>({marginTop:e.space.$2,gap:e.space.$4,flexWrap:"wrap",[u.mqu.sm]:{justifyContent:"center"}}),children:[(0,i.tZ)(v,{..._}),(0,i.BX)(s.FormButtonContainer,{sx:e=>({margin:e.space.$none,flexWrap:"wrap",justifyContent:"center"}),children:[(0,i.tZ)(s.Form.SubmitButton,{block:!1,isDisabled:!L,localizationKey:(0,d.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,i.tZ)(s.Form.ResetButton,{localizationKey:c||(0,d.u1)("userProfile.formButtonReset"),block:!1,onClick:o})]})]})]})},v=e=>{const{options:t,isLoading:o}=(0,c.e)(),{t:n}=(0,d.zJ)();return(0,i.tZ)(s.Form.ControlRow,{elementId:e.id,children:(0,i.tZ)(l.Flex,{direction:"col",gap:2,children:(0,i.tZ)(p.DQ,{...e.props,roles:t,isDisabled:o,onChange:t=>e.setValue(t),triggerSx:e=>({minWidth:e.sizes.$40,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48}),prefixLocalizationKey:`${n((0,d.u1)("formFieldLabel__role"))}:`})})})}},5362:function(e,t,o){o.d(t,{a:function(){return v},N:function(){return h}});var i=o(2903),n=o(6131),r=o(2045),a=o(1940),l=o(3918),s=o(3476),c=o(8512),d=o(1671),u=o(7790),g=o(3736);const p=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const o=(0,g.useRouter)();return(0,i.BX)(s.Flex,{sx:e=>({background:e.colors.$neutralAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,i.tZ)(s.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,i.BX)(s.Text,{children:["This organization is limited to ",(0,r.OR)(t)," members.",(0,i.tZ)("br",{}),(0,i.tZ)(s.Link,{sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>o.navigate((0,r.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var m=o(4095);const h=(0,c.withCardStateProvider)((e=>{const{close:t}=(0,d.XC)(),{onReset:o=t}=e,u=(0,s.localizationKeys)("organizationProfile.invitePage.title"),g=(0,s.localizationKeys)("organizationProfile.invitePage.subtitle"),h=(0,c.useCardState)(),f=(0,a.a2)({onNextStep:()=>h.setError(void 0)}),{organization:b}=(0,n.o8)(),{__unstable_manageBillingUrl:x,__unstable_manageBillingMembersLimit:z}=(0,l.useOrganizationProfileContext)();if(!b)return null;const S=!!z&&(0,r.OR)(z)<=b.pendingInvitationsCount+b.membersCount;return(0,i.BX)(a.en,{...f.props,children:[(0,i.BX)(c.FormContainer,{headerTitle:u,headerSubtitle:g,children:[S&&x&&(0,i.tZ)(p,{__unstable_manageBillingUrl:x,__unstable_manageBillingMembersLimit:z}),(0,i.tZ)(m.l,{onSuccess:f.nextStep,onReset:o})]}),(0,i.tZ)(c.SuccessPage,{title:u,onFinish:t,contents:(0,i.tZ)(v,{})})]})})),v=()=>(0,i.BX)(s.Flex,{direction:"col",center:!0,gap:4,children:[(0,i.tZ)(c.IconCircle,{boxElementDescriptor:s.descriptors.invitationsSentIconBox,iconElementDescriptor:s.descriptors.invitationsSentIcon,icon:u.GT}),(0,i.tZ)(s.Text,{localizationKey:(0,s.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},9654:function(e,t,o){o.d(t,{DQ:function(){return u},RN:function(){return d},wQ:function(){return s}});var i=o(2903),n=o(2784),r=o(3476),a=o(8512),l=o(5802);const s=e=>{const{headers:t,page:o,onPageChange:n,rows:l,isLoading:s,itemCount:d,itemsPerPage:u,pageCount:g,emptyStateLocalizationKey:p}=e,m=d>0?Math.max(0,(o-1)*u)+1:0,h=Math.min(o*u,d);return(0,i.BX)(r.Col,{gap:4,sx:{width:"100%"},children:[(0,i.tZ)(r.Flex,{sx:e=>({overflowX:"auto",padding:e.space.$1}),children:(0,i.BX)(r.Table,{children:[(0,i.tZ)(r.Thead,{children:(0,i.tZ)(r.Tr,{children:t.map(((e,t)=>(0,i.tZ)(r.Th,{elementDescriptor:r.descriptors.tableHead,localizationKey:e},t)))})}),(0,i.tZ)(r.Tbody,{children:s?(0,i.tZ)(r.Tr,{children:(0,i.tZ)(r.Td,{colSpan:4,children:(0,i.tZ)(r.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:r.descriptors.spinner})})}):l.length?l:(0,i.tZ)(c,{localizationKey:p},"empty")})]})}),g>1&&(0,i.tZ)(a.Pagination,{count:g,page:o,onChange:n,siblingCount:1,rowInfo:{allRowsCount:d,startingRow:m,endingRow:h}})]})},c=e=>(0,i.tZ)(r.Tr,{children:(0,i.tZ)(r.Td,{colSpan:4,children:(0,i.tZ)(r.Text,{localizationKey:e.localizationKey,sx:{margin:"auto",display:"block",width:"fit-content"}})})}),d=e=>(0,i.tZ)(r.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$neutralAlpha50}})}),u=e=>{const{value:t,roles:o,onChange:s,isDisabled:c,triggerSx:d,optionListSx:u,prefixLocalizationKey:p}=e,{localizeCustomRole:m}=(0,l.q)(),h=(0,n.useMemo)((()=>[...o||[]]),[o]),v=(0,n.useMemo)((()=>h.find((e=>e.value===t))),[h]),{t:f}=(0,r.useLocalizations)(),b=(0,n.useMemo)((()=>h.map((e=>({value:e.value,label:m(e.value)||e.label})))),[h,m]);return(0,i.BX)(a.Select,{elementId:"role",options:b,value:t,placeholder:f((0,r.localizationKeys)("organizationProfile.invitePage.selectDropdown__role")),onChange:e=>s(e.value),renderOption:(e,t,o)=>(0,i.tZ)(g,{isSelected:o,option:e,sx:e=>({"&:hover":{backgroundColor:e.colors.$neutralAlpha100},'&[data-focused="true"]':{backgroundColor:e.colors.$neutralAlpha150}})}),children:[(0,i.tZ)("input",{name:"role",type:"hidden",value:t}),(0,i.tZ)(a.SelectButton,{sx:d||(e=>({color:e.colors.$colorText,backgroundColor:"transparent",textWrap:"nowrap"})),isDisabled:c,children:((null==v?void 0:v.label)||(null==v?void 0:v.value))&&(0,i.BX)(r.Flex,{as:"span",gap:1,children:[p&&(0,i.tZ)(r.Text,{as:"span",colorScheme:"secondary",localizationKey:p}),(0,i.tZ)(r.Text,{as:"span",sx:e=>({color:e.colors.$colorText}),children:m(null==v?void 0:v.value)||(null==v?void 0:v.label)})]})}),(0,i.tZ)(a.SelectOptionList,{sx:u})]})},g=(0,n.memo)((e=>{const{option:t,isSelected:o,sx:n,...a}=e;return(0,i.tZ)(r.Flex,{sx:[e=>({width:"100%",padding:`${e.space.$2} ${e.space.$4}`,borderRadius:e.radii.$md}),n],...a,children:(0,i.tZ)(r.Text,{colorScheme:"secondary",children:null==t?void 0:t.label})})}))},6884:function(e,t,o){o.d(t,{D:function(){return l}});var i=o(2903),n=o(3476),r=o(8512),a=o(9120);const l=e=>{const{organization:t,...o}=e;return(0,i.BX)(n.Col,{children:[(0,i.tZ)(n.Text,{variant:"subtitle",sx:e=>({textAlign:"left",marginBottom:e.space.$2}),localizationKey:(0,a.u1)("organizationProfile.start.profileSection.uploadAction__title")}),(0,i.tZ)(r.AvatarUploader,{...o,title:(0,a.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,i.tZ)(r.OrganizationAvatar,{size:e=>e.sizes.$16,...t})})]})}},1659:function(e,t,o){o.d(t,{AO:function(){return i},Sz:function(){return n}});const i={userMemberships:{infinite:!0},userInvitations:{infinite:!0},userSuggestions:{infinite:!0,status:["pending","accepted"]}},n=(e,t,o)=>{var i;if(void 0===t)return[{data:[e],total_count:1}];const n=(null===(i=null==t?void 0:t[t.length-1])||void 0===i?void 0:i.total_count)||1;return t.map((t=>{if(void 0===t)return t;const i=t.data.map((t=>t.id===e.id?{...e}:t));return{...t,data:i,total_count:"negative"===o?n-1:n}}))}}}]);