"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[379],{5058:function(e,t,n){n.r(t),n.d(t,{OneTap:function(){return f}});var o=n(2903),c=n(2784),i=n(3918),a=n(3476),r=n(3736),l=n(6131),u=n(9286),s=n(8512),d=n(1661);const p=(0,s.withCardStateProvider)((function(){const e=(0,l.cL)(),{user:t}=(0,l.aF)(),n=(0,i.useEnvironment)(),o=(0,c.useRef)(!1),{navigate:a}=(0,r.useRouter)(),s=(0,i.useGoogleOneTapContext)();async function p(t){o.current=!1;try{const n=await e.authenticateWithGoogleOneTap({token:t.credential});await e.handleGoogleOneTapCallback(n,s.generateCallbackUrls(window.location.href),a)}catch(n){console.error(n)}}const h=n.displayConfig.googleOneTapClientId,f=!(null==t?void 0:t.id)&&!!h,{data:g}=(0,d.ib)(f?async function(){const e=await(0,u.g)();return e.accounts.id.initialize({client_id:h,callback:p,itp_support:s.itpSupport,cancel_on_tap_outside:s.cancelOnTapOutside,auto_select:!1,use_fedcm_for_prompt:s.fedCmSupport}),e}:void 0,"google-identity-services-script");return(0,c.useEffect)((()=>{!g||(null==t?void 0:t.id)||o.current||(g.accounts.id.prompt((t=>{"skipped"===t.getMomentType()&&e.closeGoogleOneTap()})),o.current=!0)}),[e,g,null==t?void 0:t.id]),(0,c.useEffect)((()=>()=>{g&&o.current&&(o.current=!1,g.accounts.id.cancel())}),[g]),null}));function h(){return(0,o.tZ)(r.Route,{path:"one-tap",children:(0,o.tZ)(a.Flow.Root,{flow:"oneTap",children:(0,o.tZ)(r.Switch,{children:(0,o.tZ)(r.Route,{index:!0,children:(0,o.tZ)(p,{})})})})})}h.displayName="OneTap";const f=(0,i.withCoreSessionSwitchGuard)(h)}}]);